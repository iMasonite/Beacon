(()=>{"use strict";class e{static prepareResponse(e){return{xhr:e,status:e.status,statusText:e.statusText,body:e.responseText,success:e.status>=200&&e.status<300||304===e.status}}static start(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(((l,s)=>{const o=new XMLHttpRequest;if(o.open(e,t,!0),"object"==typeof i&&null!==i&&!1===Array.isArray(i)){const e=Object.keys(i);for(const t of e)o.setRequestHeader(t,i[t])}o.onload=()=>{const e=this.prepareResponse(o);e.success?l(e):s(e)},o.onerror=()=>{s(this.prepareResponse(o))},o.send(n)}))}static get(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.start("GET",t,null,n)}static post(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n instanceof URLSearchParams?(i["Content-Type"]="application/x-www-form-urlencoded",e.start("POST",t,n.toString(),i)):"object"==typeof n&&null!==n||Array.isArray(n)?(i["Content-Type"]="application/json",e.start("POST",t,JSON.stringify(n),i)):e.start("POST",t,n,i)}static delete(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.start("DELETE",t,null,n)}}var t;function n(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{static show(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Ok";return this.confirm(e,t,n,null)}static confirm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Ok",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Cancel",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return new Promise(((s,o)=>{const a=document.getElementById("overlay"),c=document.getElementById("dialog"),r=document.getElementById("dialog_message"),d=document.getElementById("dialog_explanation"),m=document.getElementById("dialog_slot"),u=document.getElementById("dialog_action_button"),v=document.getElementById("dialog_cancel_button");a&&c&&r&&d&&u&&v?(a.className="exist",c.className="exist",setTimeout((()=>{a.className="exist visible",c.className="exist visible"}),10),r.innerText=e,t?(d.innerText=t,d.classList.remove("hidden")):(d.innerText="",d.classList.add("hidden")),m&&(l?(m.innerHTML=l,m.classList.remove("hidden")):(m.innerText="",m.classList.add("hidden"))),u.clickHandler&&u.removeEventListener("click",u.clickHandler),v.clickHandler&&v.removeEventListener("click",v.clickHandler),u.clickHandler=()=>{this.hide(),setTimeout((()=>{s()}),300)},u.addEventListener("click",u.clickHandler),u.innerText=n,i?(v.clickHandler=()=>{this.hide(),setTimeout((()=>{o()}),300)},v.addEventListener("click",v.clickHandler),v.innerText=i):v.className="hidden"):o()}))}static hide(){var e=document.getElementById("overlay"),t=document.getElementById("dialog");e&&t&&(e.className="exist",t.className="exist",setTimeout((()=>{e.className="",t.className=""}),300))}static showModal(e){if(this.activeModal)return;const t=document.getElementById("overlay"),n=document.getElementById(e);t&&n&&(t.classList.add("exist"),n.classList.add("exist"),this.activeModal=e,setTimeout((()=>{t.classList.add("visible"),n.classList.add("visible")}),10),this.viewportWatcher=setInterval((()=>{if(!this.activeModal)return;document.querySelectorAll("#".concat(this.activeModal," .modal-content .content")).forEach((e=>{n.classList.toggle("scrolled",e.scrollHeight>e.clientHeight)}));const e=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);n.classList.toggle("centered",n.clientHeight>.75*e)}),100))}static hideModal(){return new Promise(((e,t)=>{if(!this.activeModal)return void t();const n=document.getElementById("overlay"),i=document.getElementById(this.activeModal);n&&i?(this.viewportWatcher&&(clearInterval(this.viewportWatcher),this.viewportWatcher=null),n.classList.remove("visible"),i.classList.remove("visible"),setTimeout((()=>{n.classList.remove("exist"),i.classList.remove("exist"),this.activeModal=null,e()}),300)):t()}))}}t=i,n(i,"activeModal",null),n(i,"viewportWatcher",null),n(i,"secureConfirm",(function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Ok",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Cancel";return new Promise(((o,a)=>{let c;switch(e){case"password":c=t.confirm(n,i,l,s,'<div class="floating-label"><input type="password" class="text-field" id="dialog_confirm_field" placeholder="Account Password"><label for="dialog_confirm_field">Account Password</label></div>');break;case"anyAuthenticator":c=t.confirm(n,i,l,s,'<div class="floating-label"><input type="text" class="text-field" id="dialog_confirm_field" placeholder="Two Step Code"><label for="dialog_confirm_field">Two Step Code</label></div>');break;default:console.log("Unknown security option ".concat(e)),a("Unknown security option")}c.then((()=>{const e=document.getElementById("dialog_confirm_field");o(e.value)})).catch((()=>{a()}))}))})),document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("contactForm"),n=document.getElementById("contactErrorNotice"),l=document.getElementById("contactNameField"),s=document.getElementById("contactEmailField"),o=document.getElementById("contactPlatformField"),a=document.getElementById("contactHostField"),c=document.getElementById("contactBodyField"),r=document.getElementById("contactActionButton"),d=document.getElementById("contactTimestampField"),m=document.getElementById("contactHashField"),u=document.getElementById("pageInitial"),v=document.getElementById("pageContactForm"),h=document.getElementById("showWebFormLink"),g=e=>{n&&(n.innerHTML=e,n.classList.remove("hidden")),r&&(r.disabled=!1)};if(t.addEventListener("submit",(t=>{if(t.preventDefault(),!(r&&n&&l&&s&&m&&c&&o&&d&&m))return console.log("Page is missing important elements"),!1;r.disabled=!0,n.classList.add("hidden");const u=l.value.trim();if(""===u)return void g("Please enter a name");const v=s.value.trim();if(""===v)return void g("Please enter a valid email address");const h=a.value.trim();if(""===h)return void g("Please fill in the host field");const p=c.value.trim();if(""===p)return void g("Please let us know how we can help");const f=o.value.trim();if(""===f)return void g("Please select one of the platforms from the menu");const y=d.value.trim(),E=m.value.trim(),b=new URLSearchParams;b.append("name",u),b.append("email",v),b.append("platform",f),b.append("host",h),b.append("body",p),b.append("timestamp",y),b.append("hash",E),e.post("/help/ticket",b).then((()=>{c.value="",r.disabled=!1,i.show("Your support request has been submitted.","You will receive an email confirmation shortly.")})).catch((e=>{let t="Sorry, there was an HTTP ".concat(e.status," error.");try{const n=JSON.parse(e.body);n.message&&(t=n.message)}catch(e){console.log(e)}g(t)}))})),s){var p,f,y;const e=null!==(p=null===(f=sessionStorage)||void 0===f?void 0:f.getItem("email"))&&void 0!==p?p:null===(y=localStorage)||void 0===y?void 0:y.getItem("email");e&&(s.value=e)}h&&h.addEventListener("click",(e=>{e.preventDefault(),u&&u.classList.add("hidden"),v&&v.classList.remove("hidden")}))}))})();