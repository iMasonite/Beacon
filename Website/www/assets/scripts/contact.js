(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,l=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===e(l)?l:String(l)),i)}var l}var n=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}var o,i;return o=n,i=[{key:"prepareResponse",value:function(e){return{xhr:e,status:e.status,statusText:e.statusText,body:e.responseText,success:e.status>=200&&e.status<300||304===e.status}}},{key:"start",value:function(t,n){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(a,r){var c=new XMLHttpRequest;if(c.open(t,n,!0),"object"===e(l)&&null!==l&&!1===Array.isArray(l))for(var s=0,d=Object.keys(l);s<d.length;s++){var u=d[s];c.setRequestHeader(u,l[u])}c.onload=function(){var e=o.prepareResponse(c);e.success?a(e):r(e)},c.onerror=function(){r(o.prepareResponse(c))},c.send(i)}))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.start("GET",e,null,t)}},{key:"post",value:function(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o instanceof URLSearchParams?(i["Content-Type"]="application/x-www-form-urlencoded",n.start("POST",t,o.toString(),i)):"object"===e(o)&&null!==o||Array.isArray(o)?(i["Content-Type"]="application/json",n.start("POST",t,JSON.stringify(o),i)):n.start("POST",t,o,i)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.start("DELETE",e,null,t)}}],null&&t(o.prototype,null),i&&t(o,i),Object.defineProperty(o,"prototype",{writable:!1}),n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}function l(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Ok";return this.confirm(e,t,n,null)}},{key:"confirm",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Ok",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Cancel",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return new Promise((function(a,r){var c=document.getElementById("overlay"),s=document.getElementById("dialog"),d=document.getElementById("dialog_message"),u=document.getElementById("dialog_explanation"),m=document.getElementById("dialog_slot"),v=document.getElementById("dialog_action_button"),f=document.getElementById("dialog_cancel_button");c&&s&&d&&u&&v&&f?(c.className="exist",s.className="exist",setTimeout((function(){c.className="exist visible",s.className="exist visible"}),10),d.innerText=e,n?(u.innerText=n,u.classList.remove("hidden")):(u.innerText="",u.classList.add("hidden")),m&&(l?(m.innerHTML=l,m.classList.remove("hidden")):(m.innerText="",m.classList.add("hidden"))),v.clickHandler&&v.removeEventListener("click",v.clickHandler),f.clickHandler&&f.removeEventListener("click",f.clickHandler),v.clickHandler=function(){t.hide(),setTimeout((function(){a()}),300)},v.addEventListener("click",v.clickHandler),v.innerText=o,i?(f.clickHandler=function(){t.hide(),setTimeout((function(){r()}),300)},f.addEventListener("click",f.clickHandler),f.innerText=i):f.className="hidden"):r()}))}},{key:"hide",value:function(){var e=document.getElementById("overlay"),t=document.getElementById("dialog");e&&t&&(e.className="exist",t.className="exist",setTimeout((function(){e.className="",t.className=""}),300))}},{key:"showModal",value:function(e){var t=this;if(!this.activeModal){var n=document.getElementById("overlay"),o=document.getElementById(e);n&&o&&(n.classList.add("exist"),o.classList.add("exist"),this.activeModal=e,setTimeout((function(){n.classList.add("visible"),o.classList.add("visible")}),10),this.viewportWatcher=setInterval((function(){if(t.activeModal){document.querySelectorAll("#".concat(t.activeModal," .modal-content .content")).forEach((function(e){o.classList.toggle("scrolled",e.scrollHeight>e.clientHeight)}));var e=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);o.classList.toggle("centered",o.clientHeight>.75*e)}}),100))}}},{key:"hideModal",value:function(){var e=this;return new Promise((function(t,n){if(e.activeModal){var o=document.getElementById("overlay"),i=document.getElementById(e.activeModal);o&&i?(e.viewportWatcher&&(clearInterval(e.viewportWatcher),e.viewportWatcher=null),o.classList.remove("visible"),i.classList.remove("visible"),setTimeout((function(){o.classList.remove("exist"),i.classList.remove("exist"),e.activeModal=null,t()}),300)):n()}else n()}))}}],null&&i(t.prototype,null),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();l(r,"activeModal",null),l(r,"viewportWatcher",null),l(r,"secureConfirm",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Ok",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Cancel";return new Promise((function(l,a){var c;switch(e){case"password":c=r.confirm(t,n,o,i,'<div class="floating-label"><input type="password" class="text-field" id="dialog_confirm_field" placeholder="Account Password"><label for="dialog_confirm_field">Account Password</label></div>');break;case"anyAuthenticator":c=r.confirm(t,n,o,i,'<div class="floating-label"><input type="text" class="text-field" id="dialog_confirm_field" placeholder="Two Step Code"><label for="dialog_confirm_field">Two Step Code</label></div>');break;default:console.log("Unknown security option ".concat(e)),a("Unknown security option")}c.then((function(){var e=document.getElementById("dialog_confirm_field");l(e.value)})).catch((function(){a()}))}))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("contactForm"),t=document.getElementById("contactErrorNotice"),o=document.getElementById("contactNameField"),i=document.getElementById("contactEmailField"),l=document.getElementById("contactPlatformField"),a=document.getElementById("contactHostField"),c=document.getElementById("contactBodyField"),s=document.getElementById("contactActionButton"),d=document.getElementById("contactTimestampField"),u=document.getElementById("contactHashField"),m=document.getElementById("pageInitial"),v=document.getElementById("pageContactForm"),f=document.getElementById("showWebFormLink"),y=function(e){t&&(t.innerHTML=e,t.classList.remove("hidden")),s&&(s.disabled=!1)};if(e.addEventListener("submit",(function(e){if(e.preventDefault(),!(s&&t&&o&&i&&u&&c&&l&&d&&u))return console.log("Page is missing important elements"),!1;s.disabled=!0,t.classList.add("hidden");var m=o.value.trim();if(""!==m){var v=i.value.trim();if(""!==v){var f=a.value.trim();if(""!==f){var p=c.value.trim();if(""!==p){var g=l.value.trim();if(""!==g){var h=d.value.trim(),b=u.value.trim(),w=new URLSearchParams;w.append("name",m),w.append("email",v),w.append("platform",g),w.append("host",f),w.append("body",p),w.append("timestamp",h),w.append("hash",b),n.post("/help/ticket",w).then((function(){c.value="",s.disabled=!1,r.show("Your support request has been submitted.","You will receive an email confirmation shortly.")})).catch((function(e){var t="Sorry, there was an HTTP ".concat(e.status," error.");try{var n=JSON.parse(e.body);n.message&&(t=n.message)}catch(e){console.log(e)}y(t)}))}else y("Please select one of the platforms from the menu")}else y("Please let us know how we can help")}else y("Please fill in the host field")}else y("Please enter a valid email address")}else y("Please enter a name")})),i){var p,g,h,b=null!==(p=null===(g=sessionStorage)||void 0===g?void 0:g.getItem("email"))&&void 0!==p?p:null===(h=localStorage)||void 0===h?void 0:h.getItem("email");b&&(i.value=b)}f&&f.addEventListener("click",(function(e){e.preventDefault(),m&&m.classList.add("hidden"),v&&v.classList.remove("hidden")}))}))})();