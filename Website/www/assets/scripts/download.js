(()=>{"use strict";document.addEventListener("beaconRunDownloads",(e=>{let{downloadData:t}=e;(()=>{const e=window.screen,t=e.width,n=e.height,a=t*window.devicePixelRatio,s=n*window.devicePixelRatio,i=navigator.platform.indexOf("Win")>-1;let o=null;if((t<1280||n<720)&&(o="This screen may not be supported. A resolution of at least 1280x720 points is required.",a>=1280&&s>=720)){const e=Math.round(100*Math.min(a/1280,s/720));i&&(o="Your display scaling settings may prevent Beacon from fitting on your screen. If you experience trouble fitting Beacon's window on your screen, try changing your display scaling to "+e+'% or lower. <a href="https://www.windowscentral.com/how-set-custom-display-scaling-setting-windows-10#change_display_scaling_default_settings_windows10">Learn how to change scaling settings.</a>')}if(o){const e=document.getElementById("screenCompatibilityNotice");e&&(e.innerHTML=o,e.classList.remove("hidden"))}})(),(async e=>{const t="macOS",n="windows-universal",a="windows-x64",s="windows-x86",i="windows-arm64";let o=[a,t,s,i],r=!1;switch(navigator.platform){case"Win32":"userAgentData"in navigator&&await navigator.userAgentData.getHighEntropyValues(["architecture","bitness"]).then((e=>{"32"===e.bitness||32===e.bitness?(o=[s,a,i,t],r=!0):"64"!==e.bitness&&64!==e.bitness||("arm"===e.architecture?(o=[i,s,a,t],r=!0):"x86"===e.architecture&&(o=[a,s,i,t],r=!0))})).catch((()=>{})),!1===r&&(o=[n,a,s,i,t],r=!0);break;case"MacIntel":o=[t,a,s,i],r=!0}const c=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Download",s=document.createElement("div");s.classList.add("row");let i=document.createElement("div");i.classList.add("label"),i.innerHTML=t;let o=document.createElement("div");o.classList.add("button");let r=document.createElement("a");r.classList.add("button"),r.classList.add("default"),r.href=n,r.innerText=a,r.setAttribute("rel","nofollow"),o.appendChild(r),s.appendChild(i),s.appendChild(o),e.appendChild(s)},l=(e,l,d)=>{if(!1===r){let t=document.createElement("div");t.classList.add("row");let n=document.createElement("div");n.classList.add("full"),n.classList.add("text-red"),n.innerText="Sorry, this version of Beacon is not compatible with your device. But just in case a mistake was made, here are the download links.",t.appendChild(n),e.appendChild(t)}let p=!0;for(const m of o){let o=!0===d&&!0===r&&!0===p?'<span class="tag blue left-space">Recommended</span>':"";switch(m){case t:Object.prototype.hasOwnProperty.call(l,"mac_url")&&(c(e,"Mac".concat(o,'<br><span class="mini text-lighter">For macOS ').concat(l.mac_display_versions,"</span>"),l.mac_url),p=!1);break;case s:Object.prototype.hasOwnProperty.call(l,"win_32_url")&&(c(e,"Windows x86 32-bit".concat(o,'<br><span class="mini text-lighter">For 32-bit versions of ').concat(l.win_display_versions,"</span>"),l.win_32_url),p=!1);break;case a:Object.prototype.hasOwnProperty.call(l,"win_64_url")&&(c(e,"Windows x86 64-bit".concat(o,'<br><span class="mini text-lighter">For 64-bit versions of ').concat(l.win_display_versions,"</span>"),l.win_64_url),p=!1);break;case i:Object.prototype.hasOwnProperty.call(l,"win_arm64_url")&&(c(e,"Windows ARM 64-bit".concat(o,'<br><span class="mini text-lighter">For 64-bit versions of ').concat(l.win_arm_display_versions,"</span>"),l.win_arm64_url),p=!1);break;case n:Object.prototype.hasOwnProperty.call(l,"win_combo_url")&&(c(e,"Windows Universal".concat(o,'<br><span class="mini text-lighter">For all versions of ').concat(l.win_display_versions,"</span>"),l.win_combo_url),p=!1)}}c(e,'Engrams Database, updated <time datetime="'+l.engrams_date+'">'+l.engrams_date_display+"</time>",l.engrams_url),c(e,"Release Notes",l.history_url,"View")},d=document.getElementById("stable"),p=document.getElementById("preview"),m=document.getElementById("legacy"),u=(e,t)=>{const n=document.createElement("span");n.innerText="".concat(e,": Beacon ").concat(t.build_display);const a=document.createElement("span");a.classList.add("games"),a.innerText="For "+t.supported_games;const s=document.createElement("div");s.classList.add("full"),s.classList.add("header"),s.appendChild(n),s.appendChild(document.createElement("br")),s.appendChild(a);const i=document.createElement("div");return i.classList.add("row"),i.appendChild(s),i},w=e.current;w&&(d.appendChild(u("Stable Version",w)),l(d,w,!0));const h=e.preview;h?(p.appendChild(u(2===h.stage?"Beta Preview":"Alpha Preview",h)),l(p,h,!1)):p.classList.add("hidden");const _=e.legacy;_?(m.appendChild(u("Legacy Version",_)),l(m,_,!1)):m.classList.add("hidden"),document.getElementById("mac_version_requirements").innerText="macOS "+w.mac_display_versions,document.getElementById("win_version_requirements").innerText=w.win_display_versions})(t)}))})();